import{r,u as P,j as e,d as z,l as B}from"./index-3f155a20.js";import{M as O}from"./MainSection-8e5005b5.js";function y(c){const a={};return c.fullname===""&&(a.fullname="Name is Required!"),c.email===""?a.email="Email is required!":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(a.email="Invalid email address!"),c.investment===""?a.investment="Investment is Required!":/^\d+$/.test(c.investment)||(a.investment="Please enter numbers only"),c.state===""&&(a.state="State field is Required!"),c.city===""&&(a.city="City field is Required!"),c.message===""?a.message="Message field is required!":c.message.length>500&&(a.message="Message must not exceed 500 characters!"),c.contact===""?a.contact="Contact field is Required!":/^[6-9]\d{9}$/.test(c.contact.replace(/\s/g,""))||(a.contact="The contact field must exclusively contain 10 digits and start with 6, 7, 8, or 9"),a}function V(){const a=new Date().toISOString().slice(0,19).replace("T"," "),f=()=>({fullname:"",email:"",contact:"",message:"",state:o,city:p,investment:"",created_at:a}),[b,S]=r.useState(""),[C,w]=r.useState([]),[E,F]=r.useState([]),[o,q]=r.useState(""),[p,T]=r.useState(""),[n,x]=r.useState({}),[j,k]=r.useState(!1),[Y,g]=r.useState(null);r.useState(!1);const[N,h]=r.useState(""),[i,u]=r.useState(f),I=P(),v=async()=>{try{const s={"content-Type":"application/json",Authorization:`Bearer ${await B()}`},l=await fetch("https://node.ftvsalon.in:3034/api/enquiry",{method:"POST",body:JSON.stringify(i),headers:s,mode:"cors"});if(console.log("res",l),l.status==200){const d=await l.json();I("/thank-you")}else{console.error("fetch data failed:",l.statusText);const d=await l.text();console.error("fetch failed with status:",l.status,d),h(d)}}catch(t){console.error("Error fetching data:",t),t.status==="error"&&t.message?h(t.message):h("An error occurred while submitting the form. Please try again later1.")}};function m(t){const{name:s,value:l}=t.target;u(d=>({...d,[s]:l}))}r.useEffect(()=>{if(j){const t=y(i);x(t),Object.keys(t).length===0?v().then(()=>{u(f),g("success")}).catch(s=>{g("error"),h("Something went wrong"),console.error("Fetch failed with error:",s)}):k(!1)}},[j,i]);const M=async t=>{t.preventDefault();const s=y(i);if(x(s),Object.keys(s).length===0)try{await v()}catch(l){console.error("Error submitting form:",l)}else console.log("Form validation failed:",s)};r.useEffect(()=>{fetch("https://www.universal-tutorial.com/api/getaccesstoken",{method:"GET",headers:{Accept:"application/json","api-token":"j9EF8D8eDp_H5D40m01kiK9E7JnY7s8Yd8bkFkzIUs945wrtSCMTl94WJ7BW0Mbznh4","user-email":"ingaleaarti956@gmail.com"}}).then(t=>t.json()).then(t=>{S(t.auth_token),R(t.auth_token)}).catch(t=>console.error(t))},[]);const R=t=>{fetch("https://www.universal-tutorial.com/api/states/India",{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}).then(s=>s.json()).then(s=>{w(s)}).catch(s=>console.error(s))},_=()=>{fetch(`https://www.universal-tutorial.com/api/cities/${o}`,{method:"GET",headers:{Authorization:`Bearer ${b}`,Accept:"application/json"}}).then(t=>t.json()).then(t=>{F(t)}).catch(t=>console.error(t))},A=t=>{const s=t.target.value;q(s),u(l=>({...l,state:s}))},$=t=>{const s=t.target.value;T(s),u(l=>({...l,city:s}))};return r.useEffect(()=>{o&&_()},[o]),e.jsxs(e.Fragment,{children:[e.jsx(O,{poster:z.contactBanner,mainHeading:"Contact us"}),e.jsx("section",{className:"enquiry-form-sec",id:"enquiry-now",children:e.jsx("div",{className:"container-fluid p-0",children:e.jsxs("div",{className:"row m-0 justify-content-center p-0",children:[e.jsx("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12",children:e.jsx("div",{className:"enquiry-heading text-center",children:e.jsxs("h2",{className:"section-heading","data-aos":"fade-up",children:[e.jsx("span",{children:"Contact"})," Us"]})})}),e.jsx("div",{className:"col-xl-8 col-lg-9 col-md-10 col-sm-12",id:"enquiry",children:e.jsxs("div",{className:"myenquire-form","data-aos":"fade-up",children:[N&&e.jsx("div",{className:"error-message",children:N}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["Full Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"input-form form-control",name:"fullname",onChange:m,value:i.fullname,placeholder:"Your Name"}),n.fullname&&e.jsx("p",{className:"input-error",children:n.fullname})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["Email ID ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",className:"input-form form-control",name:"email",onChange:m,value:i.email,placeholder:"Your Email Id"}),n.email&&e.jsx("p",{className:"input-error",children:n.email})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["Contact Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"input-form form-control",name:"contact",onChange:m,value:i.contact,placeholder:"Your Phone No.",maxLength:"10",minLength:"10",min:"0"}),n.contact&&e.jsx("p",{className:"input-error",children:n.contact})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["Investment Capacity",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"input-form form-control",name:"investment",onChange:m,value:i.investment,placeholder:"Investment Capacity Ex.: 10CR"}),n.investment&&e.jsx("p",{className:"input-error",children:n.investment})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["State ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",autoComplete:"off",name:"state",value:o,onChange:A,children:[e.jsx("option",{value:"",hidden:!0,children:"Select State"}),C.map((t,s)=>e.jsx("option",{value:t.state_name,children:t.state_name},s))]}),n.state&&e.jsx("p",{className:"input-error",children:n.state})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{htmlFor:"",className:"form-label",children:["City ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",autoComplete:"off",name:"city",value:p,onChange:$,children:[e.jsx("option",{value:"",hidden:!0,children:"Select City"}),E.map((t,s)=>e.jsx("option",{value:t.city_name,children:t.city_name},s))]}),n.city&&e.jsx("p",{className:"input-error",children:n.city})]})]}),e.jsx("div",{className:"row ",children:e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{htmlFor:"",className:"form-label",children:"Message"}),e.jsx("textarea",{className:"input-form form-control",name:"message",onChange:m,value:i.message,type:"text",rows:"4",placeholder:"Tell us more about your Inquiry"}),n.message&&e.jsx("p",{className:"input-error",children:n.message})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"btn btn-submit theme-btn",name:"enquiry_submit",children:"Submit"})})]})]})})]})})})]})}export{V as default};
